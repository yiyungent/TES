@model Domain.RoleInfo
@{
	ViewBag.Title = "角色修改 - " + Model.Name;
	Layout = "~/Areas/Admin/Views/Shared/_AdminContent.cshtml";
}

<!-- start 提示框 -->
@Html.Partial("_MessagePartial")
<!-- end 提示框 -->

@using (Ajax.BeginForm("Edit", new AjaxOptions
{
	HttpMethod = "Post",
	OnComplete = "onComplete"
}))
{
	@Html.ValidationMessage("Name", new { @class = "list-group" })
	<div class="input-group">
		@Html.TextBoxFor(m => m.ID, new { @class = "form-control", @readonly = "readonly" })
		@Html.TextBoxFor(m => m.Name, new { @class = "form-control" })
		<div class="btn-group">
			<a class="btn btn-default" href="@Url.Action("Index")">返回</a>
			<input class="btn btn-primary" type="submit" value="保存" />
		</div>
	</div>
}

<script>
	function onComplete(data) {
		console.log(data);
		$("#js-message").fadeIn();
		var resJson = data.responseJSON;
		if (resJson.code <= 0) {
			$("#js-message").attr("class", "alert alert-danger").find(".message").html(resJson.message)
		} else {
			$("#js-message").attr("class", "alert alert-success").find(".message").html(resJson.message);
		}
		// 3s 后隐藏
		setTimeout(function () {
			$("#js-message").fadeOut("slow");
		}, 3000);
	}
</script>
